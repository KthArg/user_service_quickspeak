ğŸ“¦ USER-SERVICE - ESTRUCTURA COMPLETA DEL PROYECTO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

user-service/
â”‚
â”œâ”€â”€ ğŸ“„ pom.xml                                  (ConfiguraciÃ³n Maven)
â”œâ”€â”€ ğŸ“„ README.md                                (DocumentaciÃ³n principal)
â”œâ”€â”€ ğŸ“„ ARCHITECTURE.md                          (Arquitectura detallada)
â”œâ”€â”€ ğŸ“„ .gitignore                               (Git ignore rules)
â”œâ”€â”€ ğŸ³ Dockerfile                               (ContainerizaciÃ³n)
â”œâ”€â”€ ğŸ³ docker-compose.yml                       (Docker Compose)
â”œâ”€â”€ ğŸš€ deploy-azure.sh                          (Script despliegue Azure)
â”œâ”€â”€ ğŸ“® postman_collection.json                  (Tests de API)
â”‚
â”œâ”€â”€ ğŸ“ src/
â”‚   â”œâ”€â”€ ğŸ“ main/
â”‚   â”‚   â”œâ”€â”€ ğŸ“ java/com/yourteacher/userservice/
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ UserServiceApplication.java        (Main class)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ domain/                            ğŸ”µ DOMAIN LAYER
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ model/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ User.java                     (Entidad de dominio)
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Role.java                     (Enum de roles)
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserStatus.java               (Enum de estados)
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ port/                          (Interfaces/Contratos)
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ in/
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserService.java          (Casos de uso)
â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“ out/
â”‚   â”‚   â”‚   â”‚           â”œâ”€â”€ UserRepository.java       (Persistencia)
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ PasswordEncoder.java      (EncriptaciÃ³n)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ application/                       ğŸŸ¢ APPLICATION LAYER
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ service/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ UserServiceImpl.java          (ImplementaciÃ³n casos de uso)
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ adapter/                           ğŸŸ¡ ADAPTER LAYER
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ in/                            (Input Adapters)
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ web/
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ UserController.java       (REST Controller)
â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ dto/
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserRequest.java      (DTO Request)
â”‚   â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserResponse.java     (DTO Response)
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“ mapper/
â”‚   â”‚   â”‚   â”‚   â”‚           â””â”€â”€ UserDtoMapper.java    (DTO â†” Domain)
â”‚   â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ out/                           (Output Adapters)
â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ persistence/
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ JpaUserRepository.java    (Spring Data JPA)
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserRepositoryAdapter.java (Adapter)
â”‚   â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“ entity/
â”‚   â”‚   â”‚   â”‚       â”‚   â”‚   â””â”€â”€ UserEntity.java       (JPA Entity)
â”‚   â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“ mapper/
â”‚   â”‚   â”‚   â”‚       â”‚       â””â”€â”€ UserMapper.java       (Entity â†” Domain)
â”‚   â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“ security/
â”‚   â”‚   â”‚   â”‚           â””â”€â”€ BcryptPasswordEncoderAdapter.java
â”‚   â”‚   â”‚   â”‚
â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ infrastructure/                    ğŸ”´ INFRASTRUCTURE
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“ config/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ SecurityConfig.java           (Spring Security)
â”‚   â”‚   â”‚       â”‚
â”‚   â”‚   â”‚       â””â”€â”€ ğŸ“ exception/
â”‚   â”‚   â”‚           â”œâ”€â”€ GlobalExceptionHandler.java   (Error handling)
â”‚   â”‚   â”‚           â””â”€â”€ ErrorResponse.java            (DTO de errores)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ ğŸ“ resources/
â”‚   â”‚       â”œâ”€â”€ application.yml                       (Config desarrollo)
â”‚   â”‚       â”œâ”€â”€ application-prod.yml                  (Config producciÃ³n)
â”‚   â”‚       â””â”€â”€ data.sql                              (Datos iniciales)
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ test/
â”‚       â””â”€â”€ ğŸ“ java/com/yourteacher/userservice/
â”‚           â””â”€â”€ ğŸ“ domain/
â”‚               â””â”€â”€ ğŸ“ model/
â”‚                   â””â”€â”€ UserTest.java                 (Tests unitarios)
â”‚
â””â”€â”€ ğŸ“ target/                                        (Archivos compilados)
    â””â”€â”€ user-service-1.0.0-SNAPSHOT.jar


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
LEYENDA DE CAPAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”µ DOMAIN LAYER (NÃºcleo de Negocio)
   â€¢ LÃ³gica de negocio pura
   â€¢ Sin dependencias de frameworks
   â€¢ Modelos de dominio
   â€¢ Interfaces (Ports)

ğŸŸ¢ APPLICATION LAYER (OrquestaciÃ³n)
   â€¢ ImplementaciÃ³n de casos de uso
   â€¢ Coordina operaciones
   â€¢ Gestiona transacciones
   â€¢ Orquesta el dominio

ğŸŸ¡ ADAPTER LAYER (Conectores)
   â€¢ Input Adapters: REST API, GraphQL, etc.
   â€¢ Output Adapters: Base de datos, servicios externos
   â€¢ Mappers y transformaciones
   â€¢ Conecta el dominio con el exterior

ğŸ”´ INFRASTRUCTURE (ConfiguraciÃ³n)
   â€¢ ConfiguraciÃ³n de Spring
   â€¢ Manejo de errores
   â€¢ Seguridad
   â€¢ Aspectos transversales


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
FLUJO DE DATOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

HTTP Request
    â†“
UserController (Input Adapter) ğŸŸ¡
    â†“ (UserRequest DTO)
UserDtoMapper
    â†“ (User Domain Model)
UserServiceImpl (Application) ğŸŸ¢
    â†“ (usa)
User (Domain Model) ğŸ”µ
    â†“ (a travÃ©s de)
UserRepository Port ğŸ”µ
    â†“ (implementado por)
UserRepositoryAdapter (Output Adapter) ğŸŸ¡
    â†“ (usa)
JpaUserRepository (Spring Data JPA)
    â†“ (persiste)
UserEntity (JPA)
    â†“
Database (H2/Azure SQL)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
DEPENDENCIAS PRINCIPALES (pom.xml)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Spring Boot 3.2.0
âœ… Spring Web (REST API)
âœ… Spring Data JPA (Persistencia)
âœ… Spring Security (Seguridad)
âœ… Spring Validation (Validaciones)
âœ… Azure SQL Driver (ProducciÃ³n)
âœ… H2 Database (Desarrollo)
âœ… Lombok (Reduce boilerplate)
âœ… JWT (AutenticaciÃ³n - futuro)
âœ… BCrypt (EncriptaciÃ³n passwords)


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
CONFIGURACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DESARROLLO (H2)
â€¢ Puerto: 8081
â€¢ Base de datos: jdbc:h2:mem:userdb
â€¢ Usuario: sa
â€¢ Password: password
â€¢ H2 Console: http://localhost:8081/h2-console

PRODUCCIÃ“N (Azure SQL)
â€¢ Puerto: 8080
â€¢ Base de datos: Configurado vÃ­a variables de entorno
â€¢ Variables requeridas:
  - DB_URL
  - DB_USERNAME
  - DB_PASSWORD
  - JWT_SECRET


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
API ENDPOINTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Base URL: http://localhost:8081/api/v1

POST   /users                    â†’ Registrar usuario
GET    /users                    â†’ Listar usuarios
GET    /users/{id}               â†’ Obtener por ID
GET    /users/email/{email}      â†’ Obtener por email
PUT    /users/{id}               â†’ Actualizar usuario
DELETE /users/{id}               â†’ Eliminar usuario
PATCH  /users/{id}/activate      â†’ Activar usuario
PATCH  /users/{id}/deactivate    â†’ Desactivar usuario
GET    /actuator/health          â†’ Health check


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
MODELO DE BASE DE DATOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TABLE: users
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column      â”‚ Type         â”‚ Notes     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚ BIGINT       â”‚ PK, AUTO  â”‚
â”‚ email       â”‚ VARCHAR(100) â”‚ UNIQUE    â”‚
â”‚ password    â”‚ VARCHAR      â”‚ BCrypt    â”‚
â”‚ first_name  â”‚ VARCHAR(50)  â”‚           â”‚
â”‚ last_name   â”‚ VARCHAR(50)  â”‚           â”‚
â”‚ status      â”‚ VARCHAR      â”‚ Enum      â”‚
â”‚ created_at  â”‚ TIMESTAMP    â”‚           â”‚
â”‚ updated_at  â”‚ TIMESTAMP    â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TABLE: user_roles
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Column      â”‚ Type         â”‚ Notes     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user_id     â”‚ BIGINT       â”‚ FK        â”‚
â”‚ role        â”‚ VARCHAR      â”‚ Enum      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ROLES: STUDENT, ADMIN
STATUS: ACTIVE, INACTIVE, SUSPENDED, PENDING


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ARCHIVOS DE DOCUMENTACIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“„ README_PRINCIPAL.md          â†’ Ãndice general y guÃ­a inicial
ğŸ“„ INSTRUCCIONES_SETUP.md       â†’ Paso a paso para setup
ğŸ“„ RESUMEN_PROYECTO.md          â†’ VisiÃ³n general y estadÃ­sticas
ğŸ“„ COMANDOS_RAPIDOS.md          â†’ Cheat sheet de comandos
ğŸ“„ ESTRUCTURA_PROYECTO.txt      â†’ Este archivo
ğŸ“„ user-service/README.md       â†’ DocumentaciÃ³n del cÃ³digo
ğŸ“„ user-service/ARCHITECTURE.md â†’ Arquitectura hexagonal


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
COMANDOS ESENCIALES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Compilar
mvn clean install

# Ejecutar
mvn spring-boot:run

# Tests
mvn test

# Package
mvn clean package

# Docker
docker-compose up -d

# Health check
curl http://localhost:8081/actuator/health


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… PROYECTO LISTO PARA:
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ“ Desarrollo local con H2
âœ“ Testing con Postman
âœ“ ContainerizaciÃ³n con Docker
âœ“ Despliegue a Azure
âœ“ IntegraciÃ³n con Azure SQL Database
âœ“ Escalado horizontal
âœ“ CI/CD pipelines


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Generado: 2025-11-03
VersiÃ³n: 1.0.0
Estado: âœ… ProducciÃ³n Ready
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
