# Configuración de Producción
# Azure App Service maneja SSL/TLS termination, el backend usa HTTP

server:
  port: ${PORT:8080}
  # SSL deshabilitado - Azure App Service maneja HTTPS externamente
  # Para mTLS con APIM, la autenticación de certificado se maneja en APIM
  # y Azure App Service pasa la petición por HTTP al backend

# Base de datos de producción (Azure SQL o PostgreSQL)
spring:
  datasource:
    url: ${DB_URL}
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD}
    driver-class-name: ${DB_DRIVER:org.postgresql.Driver}

  jpa:
    hibernate:
      ddl-auto: validate
    show-sql: false
    properties:
      hibernate:
        dialect: ${HIBERNATE_DIALECT:org.hibernate.dialect.PostgreSQLDialect}
        format_sql: false

  h2:
    console:
      enabled: false

  # Deshabilitar inicialización de datos en producción
  sql:
    init:
      mode: never

# JWT
jwt:
  secret: ${JWT_SECRET}
  expiration: ${JWT_EXPIRATION:86400000}

# Logging en producción
logging:
  level:
    root: WARN
    com.yourteacher.userservice: INFO
    org.springframework.security: WARN
    org.hibernate.SQL: WARN

# Actuator
management:
  endpoints:
    web:
      exposure:
        include: health,info
  endpoint:
    health:
      show-details: when-authorized
